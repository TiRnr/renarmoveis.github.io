<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Registro por C√≥digo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            min-height: 100vh;
            margin: 0;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-width: 500px;
            margin: 60px auto;
        }

        h1 {
            color: #1a2980;
            margin-bottom: 10px;
        }

        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
            font-size: 18px;
        }

        .success { background: #d4edda; color: #155724; }
        .warning { background: #fff3cd; color: #856404; }
        .error { background: #f8d7da; color: #721c24; }

        .info-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .info-item {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }

        .info-label { font-weight: bold; color: #333; }
        .info-value { color: #1a2980; font-family: monospace; }
    </style>
</head>
<body>

<div class="container">
    <h1>üìå Registro Realizado</h1>

    <div class="status" id="status">Processando...</div>

    <div class="info-box" id="infoBox" style="display:none;">
        <div class="info-item">
            <span class="info-label">C√≥digo:</span>
            <span class="info-value" id="codigoValue">-</span>
        </div>
        <div class="info-item">
            <span class="info-label">Nome:</span>
            <span class="info-value" id="nomeValue">-</span>
        </div>
        <div class="info-item">
            <span class="info-label">Data/Hora:</span>
            <span class="info-value" id="dataValue">-</span>
        </div>
    </div>
</div>

<script>
    // SUA URL DO GOOGLE SCRIPT
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycby-pe7jjk_GWwzIJoszKDcThV0AClgqUEkdd1YKymV4ywRuGu7zrIpKLcS68cqT_5oetw/exec";

    const statusEl = document.getElementById("status");
    const infoBox = document.getElementById("infoBox");
    const codigoValueEl = document.getElementById("codigoValue");
    const nomeValueEl = document.getElementById("nomeValue");
    const dataValueEl = document.getElementById("dataValue");

    function getCodigo() {
        const params = new URLSearchParams(window.location.search);
        return params.get("c") || params.get("codigo") || params.get("code") || null;
    }

    function setStatus(msg, tipo="warning") {
        statusEl.textContent = msg;
        statusEl.className = "status " + tipo;
    }

    async function registrar(codigo) {
        try {
            setStatus("Enviando registro...");

            const resposta = await fetch(`${GOOGLE_SCRIPT_URL}?c=${codigo}`);
            const texto = await resposta.text();

            const dataAtual = new Date().toLocaleString();

            codigoValueEl.textContent = codigo;
            dataValueEl.textContent = dataAtual;

            if (texto.includes("SUCESSO:")) {
                const nome = texto.replace("SUCESSO: ", "").split(" registrado")[0];
                nomeValueEl.textContent = nome;
                setStatus("‚úî Registro conclu√≠do!", "success");
            } else {
                nomeValueEl.textContent = "N√£o encontrado";
                setStatus("‚ö† C√≥digo n√£o cadastrado", "warning");
            }

            infoBox.style.display = "block";

        } catch (e) {
            setStatus("‚ùå Erro ao registrar", "error");
        }
    }

    function main() {
        const codigo = getCodigo();
        if (!codigo) {
            setStatus("Nenhum c√≥digo informado na URL", "warning");
            return;
        }
        registrar(codigo);
    }

    main();
</script>

</body>
</html>
